<% provide(:title, "Fahrten erfassen") %>
<h1>Neue Fahrt speichern</h1>
  <div class="row">
   <div class="col-md-6 col-md-offset-3">
     <%= form_for(@distance, url: distance_path) do |f| %>
       <%= render 'shared/error_messages2' %>

       <%= f.label :startpunkt, "Startpunkt" %>
       <%= f.text_field :startpunkt, class: 'form-control' %>

       <%= f.label :zielpunkt, "Zielpunkt" %>
       <%= f.text_field :zielpunkt, class: 'form-control' %>

       <%= f.label :verkehrsmittel, "Verkehrsmittel" %>
       <%= f.select :verkehrsmittel, ["Auto", "Zug", "Bus", "Flugzeug"], :prompt => "Bitte auswÃ¤hlen" %>

       <%= f.submit "Fahrt speichern", class: "btn btn-info" %>
     <% end %>
   </div>
  </div>
  <div class ="container">
        <div id="directions"></div>
  </div>
<script>
  var directionsDisplay = new google.maps.DirectionsRenderer();
  var directionsService = new google.maps.DirectionsService();

  function calcRoute() {
    var origin      = new google.maps.LatLng(41.850033, -87.6500523);
    var destination = new google.maps.LatLng(42.850033, -85.6500523);
    var request = {
        origin:      origin,
        destination: destination,
        travelMode:  google.maps.TravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  }

  calcRoute();

  var handler = Gmaps.build('Google');
  handler.buildMap({ internal: {id: 'directions'}}, function(){
    directionsDisplay.setMap(handler.getMap());
  });
</script>
